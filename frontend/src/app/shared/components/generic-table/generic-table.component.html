<div class="table-responsive">
  <table cdk-table [dataSource]="dataSource()" class="table table-striped table-hover align-middle">
    @for (col of columns(); track col.key) {
    <ng-container [cdkColumnDef]="col.key">
      <th cdk-header-cell *cdkHeaderCellDef scope="col" [style.width]="col.width"> {{ col.header }} </th>
      <td cdk-cell *cdkCellDef="let row">
        @switch (col.type) {
        @case ('actions') {
        <button class="btn btn-sm btn-outline-primary me-2" (click)="onEdit(row)">
          <i class="bi bi-pencil"></i> Edit
        </button>
        <button class="btn btn-sm btn-outline-danger" (click)="onDelete(row)">
          <i class="bi bi-trash"></i> Delete
        </button>
        }
        @case ('date') {
        <span>{{ getPropertyValue(row, col.key) | date }}</span>
        }
        @case ('currency') {
        <span>{{ getPropertyValue(row, col.key) | currency }}</span>
        }
        @case ('boolean') {
        <span>
          <i class="bi" [class.bi-check-circle-fill]="getPropertyValue(row, col.key)"
            [class.bi-x-circle-fill]="!getPropertyValue(row, col.key)"
            [class.text-success]="getPropertyValue(row, col.key)"
            [class.text-danger]="!getPropertyValue(row, col.key)"></i>
        </span>
        }
        @default {
        <span>{{ getPropertyValue(row, col.key) }}</span>
        }
        }
      </td>
    </ng-container>
    }

    <tr cdk-header-row *cdkHeaderRowDef="displayedColumns()" class="table-light"></tr>
    <tr cdk-row *cdkRowDef="let row; columns: displayedColumns()"></tr>
  </table>
</div>

@if (meta(); as m) {
@if (m.total > m.limit) {
<nav aria-label="Page navigation" class="mt-3">
  <ul class="pagination justify-content-end">
    <li class="page-item" [class.disabled]="m.page === 1">
      <button class="page-link" (click)="onPageChange(m.page - 1)" aria-label="Previous">
        <span aria-hidden="true">&laquo;</span>
      </button>
    </li>
    <li class="page-item disabled">
      <span class="page-link">Page {{ m.page }} of {{ m.lastPage }}</span>
    </li>
    <li class="page-item" [class.disabled]="m.page === m.lastPage">
      <button class="page-link" (click)="onPageChange(m.page + 1)" aria-label="Next">
        <span aria-hidden="true">&raquo;</span>
      </button>
    </li>
  </ul>
</nav>
}
}